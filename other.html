{#本页面用来存储替换过的东西#}

<!-- userinfo.html 里面打算换一个错误提示，这是原来的错误提示  -->
<!-- 验证提示 -->
{% for err in form.id_card.errors %}
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×
        </button>
        <h4><i class="icon fa fa-ban"></i>&nbsp;操作失败</h4>
        {{ err }}
    </div>
{% endfor %}
<!-- 验证提示 -->
<!-- 验证提示 -->
{% for err in form.phone.errors %}
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×
        </button>
        <h4><i class="icon fa fa-ban"></i>&nbsp;操作失败</h4>
        {{ err }}
    </div>
{% endfor %}
<!-- 验证提示 -->
<!-- 验证提示 -->
{% for err in form.gender.errors %}
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×
        </button>
        <h4><i class="icon fa fa-ban"></i>&nbsp;操作失败</h4>
        {{ err }}
    </div>
{% endfor %}
<!-- 验证提示 -->
<!-- 验证提示 -->
{% for err in form.name.errors %}
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×
        </button>
        <h4><i class="icon fa fa-ban"></i>&nbsp;操作失败</h4>
        {{ err }}
    </div>
{% endfor %}
<!-- 验证提示 -->
<!-- 验证提示 -->
{% for err in form.email.errors %}
    <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×
        </button>
        <h4><i class="icon fa fa-ban"></i>&nbsp;操作失败</h4>
        {{ err }}
    </div>
{% endfor %}
<!-- 验证提示 -->
<!-- userinfo.html 里面打算换一个错误提示，这是原来的错误提示  -->


<!-- 弹出框插件 -->
<a class="sa-warning"><i class="fa fa-trash-o"></i></a>
<script>
    $('.sa-warning').click(function () {
        swal({
            title: "确认删除?",
            text: "您想要删除此行数据么？",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "是的，我要删除",
            cancelButtonText: "取消",
            closeOnConfirm: false
        }, function () {
            swal("删除成功!", "此行数据已被删除.", "success");
        });
    });
</script>
<!-- 弹出框插件 -->


<!-- refbook系列的日期修改 -->
# 插件传过来的数据为yyyy-MM-dd，故不用下面的方法了
# pubdate = data["pubdate"]  输出测试
# year_index = pubdate.find("年")
# month_index = pubdate.find("月")
# day_index = pubdate.find("日")
# pubdate = pubdate[:year_index] + "-" + pubdate[year_index + 1:month_index] + "-" + pubdate[
#                                                                                    month_index + 1:day_index]
<!-- refbook系列的日期修改 -->

<!-- admin_script.html修改 -->
<script src="{{ url_for('static', filename='js/jquery.scrollTo.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/chat/moment-2.2.1.js') }}"></script>

<script src="{{ url_for('static', filename='js/modernizr.min.js') }}"></script>

<!-- sparkline -->
<script src="{{ url_for('static', filename='assets/sparkline-chart/jquery.sparkline.min.js') }}"
        type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/sparkline-chart/chart-sparkline.js') }}"
        type="text/javascript"></script>

<!-- sweet alerts -->
<script src="{{ url_for('static', filename='assets/sweet-alert/sweet-alert.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/sweet-alert/sweet-alert.init.js') }}"></script>

<!-- admin_script.html修改 -->

<!-- index.html 中间部分修改 -->
<div class="row">
    <div class="col-lg-6">
        <div class="portlet"><!-- /primary heading -->
            <div class="portlet-heading">
                <h3 class="portlet-title text-dark text-uppercase">
                    Yearly Sales Report
                </h3>
                <div class="portlet-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="ion-refresh"></i></a>
                    <span class="divider"></span>
                    <a data-toggle="collapse" data-parent="#accordion1" href="#portlet2"><i
                            class="ion-minus-round"></i></a>
                    <span class="divider"></span>
                    <a href="#" data-toggle="remove"><i class="ion-close-round"></i></a>
                </div>
                <div class="clearfix"></div>
            </div>
            <div id="portlet2" class="panel-collapse collapse in">
                <div class="portlet-body">
                    <div id="morris-area-example" style="height: 320px;"></div>
                    <div class="row text-center m-t-30 m-b-30">
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 126</h4>
                            <small class="text-muted"> Today's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 967</h4>
                            <small class="text-muted">This Week's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 4500</h4>
                            <small class="text-muted">This Month's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 87,000</h4>
                            <small class="text-muted">This Year's Sales</small>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- /Portlet -->

    </div>

    <div class="col-lg-6">
        <div class="portlet"><!-- /primary heading -->
            <div class="portlet-heading">
                <h3 class="portlet-title text-dark text-uppercase">
                    Weekly Sales Report
                </h3>
                <div class="portlet-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="ion-refresh"></i></a>
                    <span class="divider"></span>
                    <a data-toggle="collapse" data-parent="#accordion1" href="#portlet1"><i
                            class="ion-minus-round"></i></a>
                    <span class="divider"></span>
                    <a href="#" data-toggle="remove"><i class="ion-close-round"></i></a>
                </div>
                <div class="clearfix"></div>
            </div>
            <div id="portlet1" class="panel-collapse collapse in">
                <div class="portlet-body">
                    <div id="morris-bar-example" style="height: 320px;"></div>

                    <div class="row text-center m-t-30 m-b-30">
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 126</h4>
                            <small class="text-muted"> Today's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 967</h4>
                            <small class="text-muted">This Week's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 4500</h4>
                            <small class="text-muted">This Month's Sales</small>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <h4>$ 87,000</h4>
                            <small class="text-muted">This Year's Sales</small>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- /Portlet -->

    </div> <!-- end col -->
</div> <!-- End row -->
<!-- index.html 中间部分修改 -->


<!-- index.html script部分修改 -->

<!-- Chat -->
<script src="{{ url_for('static', filename='js/jquery.chat.js') }}"></script>

<!--Morris Chart-->
<script src="{{ url_for('static', filename='assets/morris/morris.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/morris/raphael.min.js') }}"></script>
<!-- sparkline -->
<script src="{{ url_for('static', filename='assets/sparkline-chart/jquery.sparkline.min.js') }}"
        type="text/javascript"></script>
<script src="{{ url_for('static', filename='assets/sparkline-chart/chart-sparkline.js') }}"
        type="text/javascript"></script>
<!-- EASY PIE CHART JS -->
<script src="{{ url_for('static', filename='assets/easypie-chart/easypiechart.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/easypie-chart/jquery.easypiechart.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/easypie-chart/example.js') }}"></script>
<!--C3 Chart-->
<script src="{{ url_for('static', filename='assets/c3-chart/d3.v3.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/c3-chart/c3.js') }}"></script>

<!-- index.html script部分修改 -->


<!-- detail.html废弃不用的 -->
<div class="col-md-2">
    <div class="panel panel-info">
        <!-- Default panel contents -->
        <div class="panel-heading text-center"><i class="fa fa-book fa-fw" aria-hidden="true"></i>&nbsp;工作动态
        </div>

        <!-- List group -->
        <ul class="list-group text-center">
            <a href="#" class="list-group-item">
                公告栏
            </a>
            <a href="#" class="list-group-item active">
                工作计划
            </a>
            <a href="#" class="list-group-item">
                报名安排
            </a>
            <a href="#" class="list-group-item">
                考试安排
            </a>
        </ul>

    </div>
</div>
<div class="panel panel-default col-md-8">
    <div class="panel-heading">工作计划</div>
    <div class="panel-body">
        <table class="table table-bordered table-striped" id="datatable-editable">
            <thead>
            <tr>
                <th class="text-center" style="display: none">g</th>
            </tr>
            </thead>
            <tbody>
            {% for value in range(1,20) %}
                <tr class="text-left">
                    <td><a href="#"><i class="fa fa-angle-double-right" aria-hidden="true"></i>&nbsp;关于印发2018年度计算机技术与软件专业技术资格（水平）考试工作安排的通知
                        [18-01-16]</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<!-- detail.html废弃不用的 -->

<!-- search.html查询部分修改前 -->
<!-- 链接显示 -->
<tr class="text-left">
    <td>
        <a href="{{ url_for('registration.detail', id=newsinfo.id) }}">
            <i class="fa fa-angle-double-right"
               aria-hidden="true"></i>&nbsp;{{ newsinfo.title | safe }}
            <span class="pull-right"> [{{ newsinfo.addtime }}]</span>
        </a>
    </td>
</tr>

<!-- 图片显示 -->
<div class="col-sm-6 col-md-4">
    <div class="thumbnail">
        <img src="{{ url_for('static', filename='uploads/books/' + newsinfo.logo) }}"
             alt="图书封面pic" class="img-block" style="width:250px;height: 250px;">
        <div class="caption text-center">
            <h3>{{ newsinfo.title | safe | truncate(8) }}</h3>
            <p>{{ newsinfo.info | truncate(20) }}</p>
            <p class="text-right"><a href="#">查看更多</a></p>
        </div>
    </div>
</div>
<!-- search.html查询部分修改前 -->

<!-- registration.index.html -->
为了标注数据，先将此抽出 addtime.strftime("%Y-%m-%d")，之后查关键字addtime加上即可
所抽出界面有：index.html，tablist.html（初级部分），newscategory.html
<!-- registration.index.html -->

<!-- registration  views.py -->
index():
newstags = newsinfos.join(NewsTag).filter(
NewsTag.id == newstag.id
)  # 找出newsinfo表中隶属公告栏的数据
下注释部分：
# if newstags.count() <= 5:
#     newstags = newstags[:]  # 不超过6条数据则全部显示
# else:
#     newstags = newstags[newstags.count() - 5:]  # 超过6条数据后选最后5条数据出现
# newstags.reverse()  # 数据翻转，目的是为了将最新的数据显示在第一条
<!-- registration  views.py -->

<!-- banner.html -->
<div class="item">
    <img src="{{ url_for('static', filename='images/c1.jpg') }}" style="width:100%" data-src="" alt="Third slide">
    <div class="container">
        <div class="carousel-caption">
            <h1>Slide 3</h1>
            <p>Donec sit amet mi imperdiet mauris viverra accumsan ut at libero.</p>
            <p><a class="btn btn-lg btn-primary" href="http://618cj.com" role="button">adward_z</a>
            </p>
        </div>
    </div>
</div>
<!-- banner.html -->

<!-- 原refbook_detail.html，用table来重构了详情界面-->
{% extends 'registration/registration.html' %}
{% block title %}
    参考书详情
{% endblock %}
{% block css %}
    <!-- fileinput -->
    <link href="{{ url_for('static', filename='assets/bootstrap-fileinput/fileinput.css') }}" rel="stylesheet"/>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="detail-div">
            <ol class="breadcrumb">
                <li><a href="{{ url_for('registration.search') }}?info=">参考书</a></li>
                <li class="active">{{ refbook.title | truncate(20) }}</li>
            </ol>
        </div>

        <!--左侧栏-->
        <div class="panel panel-default col-md-10">
            <div class="panel-heading">{{ refbook.title | truncate(20) }}</div>
            <div class="panel-body">
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label class="col-md-2 control-label">书名：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.title }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">作者：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.author }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">ISBN：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.ISBN }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">出版社：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.public }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">页码：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.pages }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">封面：</label>
                        <div class="col-md-10">
                            <img src="{{ url_for('static', filename='uploads/books/'+refbook.logo) }}" alt="图书封面pic"
                                 style="width: 100%">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">价格：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.price }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">出版日期：</label>
                        <div class="col-md-10">
                            <input class="form-control" value="{{ refbook.pubdate }}" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">图书简介：</label>
                        <div class="col-md-10">
                            <textarea class="form-control" rows="10" disabled>{{ refbook.info }}</textarea>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        {% include 'registration/affairs_public.html' %}
    </div>
{% endblock %}
<!-- refbook_detail.html -->


<!-- 为了统一风格，动态显示标签，对nav.html进行大幅度修改，原内容如下 -->
<!-- nav.html -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <img alt="Brand" class="navbar-brand hover" src="///png.icons8.com/html/win8/50/5B5B5B"/>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class=""><a href="{{ url_for('registration.index') }}"><i class="fa fa-home fa-fw"
                                                                              aria-hidden="true"></i>&nbsp; 首页 <span
                        class="sr-only">(current)</span></a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"><i class="fa fa-book fa-fw" aria-hidden="true"></i>&nbsp;工作动态 <span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url_for('registration.newscategory', name="公告栏") }}">公告栏</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="工作计划") }}">工作计划</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="报名安排") }}">报名安排</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="考试安排") }}">考试安排</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"><i class="fa fa-newspaper-o" aria-hidden="true"></i>&nbsp;考试概述 <span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url_for('registration.newscategory', name="考试介绍") }}">考试介绍</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="资格介绍") }}">资格介绍</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="考试教程和大纲") }}">考试教程和大纲</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"><i class="fa fa-mortar-board" aria-hidden="true"></i>&nbsp;等级介绍 <span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url_for('registration.newscategory', name="初级") }}">初级</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="中级") }}">中级</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('registration.newscategory', name="高级") }}">高级</a></li>
                    </ul>
                </li>

            </ul>
            <form class="navbar-form navbar-left" role="form" id="myform">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="参考书搜索" id="info" style="width: 70%;">
                    <span class="input-group-btn" style="float: left">
                        <a type="submit" class="btn btn-default" id="search"><span class="fa fa-search"/></a>
                    </span>
                </div>
            </form>

            <ul class="nav navbar-nav navbar-right">
                {% if "user_id" not in session %}
                    <li><a href="{{ url_for('registration.login') }}"><i class="fa fa-sign-in" aria-hidden="true"></i>&nbsp;&nbsp;登录</a>
                    </li>
                    <li><a href="{{ url_for('registration.register') }}"><i class="fa fa-user-plus"
                                                                            aria-hidden="true"></i>&nbsp;注册</a></li>
                {% else %}
                    <li><span
                            style="position: relative;display: block;padding: 10px 15px;line-height: 20px;color: #ffffff;padding-top: 15px;"><i
                            class="fa fa-id-card-o"
                            aria-hidden="true"></i>&nbsp;&nbsp;<strong>您好，{{ session["user"] }}</strong></span></li>
                    <li><a href="{{ url_for('registration.userinfo') }}"><i class="fa fa-user-circle"
                                                                            aria-hidden="true"></i>&nbsp;个人中心</a></li>

                    <li><a href="{{ url_for('registration.logout') }}"><i class="fa fa-sign-out" aria-hidden="true">&nbsp;&nbsp;退出</i></a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
<!-- nav.html -->

<!-- tinfo.html -->
<td>
    <a data-toggle="modal" data-target="#myModal{{ tinfo.id }}">
        <i class="fa fa-angle-double-right" aria-hidden="true"></i>&nbsp;
        {{ tinfo.tlevel.level | safe }}&nbsp;—&nbsp;{{ tinfo.tsubject.subject | safe | truncate(20) }}
        <span class="pull-right"> [{{ tinfo.addtime.strftime('%Y-%m-%d') }}]</span>
    </a>
    <!-- 模态框（Modal） -->
    <div class="modal fade" id="myModal{{ tinfo.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"
                        id="myModalLabel">{{ tinfo.tlevel.level | safe + tinfo.tsubject.subject | safe | truncate(20) }}</h4>
                </div>
                {% for tlist in tinfo_list %}
                    {% if tinfo.level_id == tlist.level_id and tinfo.subject_id == tlist.subject_id %}
                        {% if tlist.t_time - now <= time_zero %}
                            <div class="modal-body">
                                <a href="{{ url_for('registration.tinfo_detail', id=tlist.id) }}" target="_blank">
                                    <i class="fa fa-angle-double-right"
                                       aria-hidden="true"></i>&nbsp;{{ tlist.area + "——>" + tlist.examroom + "——>" + tlist.t_time.strftime("%Y-%m-%d %H:%M:%S") }}
                                </a>
                                <span class="badge">已过期</span>
                            </div>
                        {% else %}
                            <div class="modal-body">
                                <a href="{{ url_for('registration.tinfo_detail', id=tlist.id) }}" target="_blank">
                                    <i class="fa fa-angle-double-right"
                                       aria-hidden="true"></i>&nbsp;{{ tlist.area + "——>" + tlist.examroom + "——>" + tlist.t_time.strftime("%Y-%m-%d %H:%M:%S") }}
                                </a>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
</td>
<!-- tinfo.html -->

<!-- admin/index.html -->
<script>
    <!-- Morris.js插件图表生成 -->
    new Morris.Bar({
        // ID of the element in which to draw the chart.
        element: 'bar_chart',
        // Chart data records -- each entry in this array corresponds to a point on
        // the chart.
        data: [
            {% for chart in chart_list %}
                {day: '{{ chart[0] }}', value: {{ chart[1] }}},
            {% endfor %}
        ],
        // The name of the data record attribute that contains x-values.
        xkey: 'day',
        // A list of names of data record attributes that contain y-values.
        ykeys: ['value'],
        // Labels for the ykeys -- will be displayed when you hover over the
        // chart.
        labels: ['费用'],
        barColors: ["#61adc0"],
        hideHover: true
    });
    <!-- Morris.js插件图表生成 End -->

    <!-- Echarts.js插件图表生成 -->
    var myChart = echarts.init(document.getElementById('myChart'));
    // 指定图表的配置项和数据
    var option = {
        tooltip: {},
        legend: {
            data: ['费用']
        },
        xAxis: {
            data: [
                {% for chart in chart_list %}
                    "{{ chart[0] }}",
                {% endfor %}
            ]
        },
        yAxis: {},
        series: [{
            name: '费用',
            type: 'bar',
            data: [
                {% for chart in chart_list %}
                    "{{ chart[1] }}",
                {% endfor %}
            ]
        }]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    <!-- Echarts.js插件图表生成 End -->

</script>
<!-- admin/index.html -->